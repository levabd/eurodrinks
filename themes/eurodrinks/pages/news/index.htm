title = "News List"
url = "/news"
layout = "default"
is_hidden = 0

[viewBag]
localeUrl[ru] = "/news"
localeUrl[uk] = "/news"

[newsPosts]
pageNumber = "{{ :page }}"
postsPerPage = 5
noPostsMessage = "Отсутсвие постов"
sortOrder = "published_at desc"
postPage = "news/article"
postFeatured = 0
==
<?php
use Indikator\News\Models\Posts;

function onStart()
{
    $this['currentYear'] = date('Y');
    $this->addJs("/themes/eurodrinks/assets/js/pages/posts/index.js", "core");
}

function onLoadPaginationData()
{
$this['posts']  = Posts::listFrontEnd([
'page'    => request('next_page'),
//   'sort'     => requeest('sortOrder'), -->
'perPage' => request('per_page'),
]);
$this['isAjax'] =  request()->ajax();


return $this->renderPartial('news/_list');
}
?>
==
<div class="container news">

    <h1 class="text-left">{{ 'News'|_ }}</h1>

    {% partial "news/_list" posts=newsPosts.posts  %}

</div>

<script>
    try {
      /**
       *
       * @type number newsPagePaginationData.current_page
       * @type number newsPagePaginationData.from
       * @type number newsPagePaginationData.to
       * @type number newsPagePaginationData.last_page
       * @type number newsPagePaginationData.per_page
       * @type number newsPagePaginationData.total
       * @type string newsPagePaginationData.first_page_url
       * @type string newsPagePaginationData.next_page_url
       * @type string newsPagePaginationData.last_page_url
       */
      var newsPagePaginationData = {{newsPosts.posts.toArray()|json_encode|raw}};

    }catch(e){
      console.error(e);
    }

</script>
